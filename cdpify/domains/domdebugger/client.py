# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import TYPE_CHECKING, Any, Literal

if TYPE_CHECKING:
    from cdpify.client import CDPClient

from .commands import (
    DOMDebuggerCommand,
    GetEventListenersParams,
    GetEventListenersResult,
    RemoveDOMBreakpointParams,
    RemoveEventListenerBreakpointParams,
    RemoveInstrumentationBreakpointParams,
    RemoveXHRBreakpointParams,
    SetBreakOnCSPViolationParams,
    SetDOMBreakpointParams,
    SetEventListenerBreakpointParams,
    SetInstrumentationBreakpointParams,
    SetXHRBreakpointParams,
)

from .types import (
    CSPViolationType,
    DOMBreakpointType,
)


class DOMDebuggerClient:
    def __init__(self, client: CDPClient) -> None:
        self._client = client

    async def get_event_listeners(
        self,
        *,
        object_id: Runtime.RemoteObjectId,
        depth: int | None = None,
        pierce: bool | None = None,
        session_id: str | None = None,
    ) -> GetEventListenersResult:
        params = GetEventListenersParams(
            object_id=object_id, depth=depth, pierce=pierce
        )

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.GET_EVENT_LISTENERS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetEventListenersResult.from_cdp(result)

    async def remove_d_o_m_breakpoint(
        self,
        *,
        node_id: DOM.NodeId,
        type: DOMBreakpointType,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = RemoveDOMBreakpointParams(node_id=node_id, type=type)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.REMOVE_D_O_M_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def remove_event_listener_breakpoint(
        self,
        *,
        event_name: str,
        target_name: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = RemoveEventListenerBreakpointParams(
            event_name=event_name, target_name=target_name
        )

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.REMOVE_EVENT_LISTENER_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def remove_instrumentation_breakpoint(
        self,
        *,
        event_name: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = RemoveInstrumentationBreakpointParams(event_name=event_name)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.REMOVE_INSTRUMENTATION_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def remove_x_h_r_breakpoint(
        self,
        *,
        url: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = RemoveXHRBreakpointParams(url=url)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.REMOVE_X_H_R_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_break_on_c_s_p_violation(
        self,
        *,
        violation_types: list[CSPViolationType],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetBreakOnCSPViolationParams(violation_types=violation_types)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.SET_BREAK_ON_C_S_P_VIOLATION,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_d_o_m_breakpoint(
        self,
        *,
        node_id: DOM.NodeId,
        type: DOMBreakpointType,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetDOMBreakpointParams(node_id=node_id, type=type)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.SET_D_O_M_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_event_listener_breakpoint(
        self,
        *,
        event_name: str,
        target_name: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetEventListenerBreakpointParams(
            event_name=event_name, target_name=target_name
        )

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.SET_EVENT_LISTENER_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_instrumentation_breakpoint(
        self,
        *,
        event_name: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetInstrumentationBreakpointParams(event_name=event_name)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.SET_INSTRUMENTATION_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_x_h_r_breakpoint(
        self,
        *,
        url: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetXHRBreakpointParams(url=url)

        result = await self._client.send_raw(
            method=DOMDebuggerCommand.SET_X_H_R_BREAKPOINT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result
