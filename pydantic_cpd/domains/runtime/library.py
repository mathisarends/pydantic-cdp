# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import TYPE_CHECKING, Any

if TYPE_CHECKING:
    from pydantic_cpd.client import CDPClient

from .commands import (
    AddBindingParams,
    AwaitPromiseParams,
    AwaitPromiseResult,
    CallFunctionOnParams,
    CallFunctionOnResult,
    CompileScriptParams,
    CompileScriptResult,
    EvaluateParams,
    EvaluateResult,
    GetExceptionDetailsParams,
    GetExceptionDetailsResult,
    GetHeapUsageResult,
    GetIsolateIdResult,
    GetPropertiesParams,
    GetPropertiesResult,
    GlobalLexicalScopeNamesParams,
    GlobalLexicalScopeNamesResult,
    QueryObjectsParams,
    QueryObjectsResult,
    ReleaseObjectGroupParams,
    ReleaseObjectParams,
    RemoveBindingParams,
    RunScriptParams,
    RunScriptResult,
    SetAsyncCallStackDepthParams,
    SetCustomObjectFormatterEnabledParams,
    SetMaxCallStackSizeToCaptureParams,
)
from .types import (
    CallArgument,
    ExecutionContextId,
    RemoteObjectId,
    ScriptId,
    SerializationOptions,
    TimeDelta,
)


class RuntimeClient:
    def __init__(self, client: CDPClient) -> None:
        self._client = client

    async def await_promise(
        self,
        *,
        promise_object_id: RemoteObjectId,
        return_by_value: bool | None = None,
        generate_preview: bool | None = None,
        session_id: str | None = None,
    ) -> AwaitPromiseResult:
        params = AwaitPromiseParams(
            promiseObjectId=promise_object_id,
            returnByValue=return_by_value,
            generatePreview=generate_preview,
        )

        result = await self._client.send_raw(
            method="Runtime.awaitPromise",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return AwaitPromiseResult.model_validate(result)

    async def call_function_on(
        self,
        *,
        function_declaration: str,
        object_id: RemoteObjectId | None = None,
        arguments: list[CallArgument] | None = None,
        silent: bool | None = None,
        return_by_value: bool | None = None,
        generate_preview: bool | None = None,
        user_gesture: bool | None = None,
        await_promise: bool | None = None,
        execution_context_id: ExecutionContextId | None = None,
        object_group: str | None = None,
        throw_on_side_effect: bool | None = None,
        unique_context_id: str | None = None,
        serialization_options: SerializationOptions | None = None,
        session_id: str | None = None,
    ) -> CallFunctionOnResult:
        params = CallFunctionOnParams(
            functionDeclaration=function_declaration,
            objectId=object_id,
            arguments=arguments,
            silent=silent,
            returnByValue=return_by_value,
            generatePreview=generate_preview,
            userGesture=user_gesture,
            awaitPromise=await_promise,
            executionContextId=execution_context_id,
            objectGroup=object_group,
            throwOnSideEffect=throw_on_side_effect,
            uniqueContextId=unique_context_id,
            serializationOptions=serialization_options,
        )

        result = await self._client.send_raw(
            method="Runtime.callFunctionOn",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return CallFunctionOnResult.model_validate(result)

    async def compile_script(
        self,
        *,
        expression: str,
        source_u_r_l: str,
        persist_script: bool,
        execution_context_id: ExecutionContextId | None = None,
        session_id: str | None = None,
    ) -> CompileScriptResult:
        params = CompileScriptParams(
            expression=expression,
            sourceURL=source_u_r_l,
            persistScript=persist_script,
            executionContextId=execution_context_id,
        )

        result = await self._client.send_raw(
            method="Runtime.compileScript",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return CompileScriptResult.model_validate(result)

    async def disable(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        result = await self._client.send_raw(
            method="Runtime.disable",
            params=None,
            session_id=session_id,
        )
        return result

    async def discard_console_entries(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        result = await self._client.send_raw(
            method="Runtime.discardConsoleEntries",
            params=None,
            session_id=session_id,
        )
        return result

    async def enable(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        result = await self._client.send_raw(
            method="Runtime.enable",
            params=None,
            session_id=session_id,
        )
        return result

    async def evaluate(
        self,
        *,
        expression: str,
        object_group: str | None = None,
        include_command_line_a_p_i: bool | None = None,
        silent: bool | None = None,
        context_id: ExecutionContextId | None = None,
        return_by_value: bool | None = None,
        generate_preview: bool | None = None,
        user_gesture: bool | None = None,
        await_promise: bool | None = None,
        throw_on_side_effect: bool | None = None,
        timeout: TimeDelta | None = None,
        disable_breaks: bool | None = None,
        repl_mode: bool | None = None,
        allow_unsafe_eval_blocked_by_c_s_p: bool | None = None,
        unique_context_id: str | None = None,
        serialization_options: SerializationOptions | None = None,
        session_id: str | None = None,
    ) -> EvaluateResult:
        params = EvaluateParams(
            expression=expression,
            objectGroup=object_group,
            includeCommandLineAPI=include_command_line_a_p_i,
            silent=silent,
            contextId=context_id,
            returnByValue=return_by_value,
            generatePreview=generate_preview,
            userGesture=user_gesture,
            awaitPromise=await_promise,
            throwOnSideEffect=throw_on_side_effect,
            timeout=timeout,
            disableBreaks=disable_breaks,
            replMode=repl_mode,
            allowUnsafeEvalBlockedByCSP=allow_unsafe_eval_blocked_by_c_s_p,
            uniqueContextId=unique_context_id,
            serializationOptions=serialization_options,
        )

        result = await self._client.send_raw(
            method="Runtime.evaluate",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return EvaluateResult.model_validate(result)

    async def get_isolate_id(
        self,
        session_id: str | None = None,
    ) -> GetIsolateIdResult:
        result = await self._client.send_raw(
            method="Runtime.getIsolateId",
            params=None,
            session_id=session_id,
        )
        return GetIsolateIdResult.model_validate(result)

    async def get_heap_usage(
        self,
        session_id: str | None = None,
    ) -> GetHeapUsageResult:
        result = await self._client.send_raw(
            method="Runtime.getHeapUsage",
            params=None,
            session_id=session_id,
        )
        return GetHeapUsageResult.model_validate(result)

    async def get_properties(
        self,
        *,
        object_id: RemoteObjectId,
        own_properties: bool | None = None,
        accessor_properties_only: bool | None = None,
        generate_preview: bool | None = None,
        non_indexed_properties_only: bool | None = None,
        session_id: str | None = None,
    ) -> GetPropertiesResult:
        params = GetPropertiesParams(
            objectId=object_id,
            ownProperties=own_properties,
            accessorPropertiesOnly=accessor_properties_only,
            generatePreview=generate_preview,
            nonIndexedPropertiesOnly=non_indexed_properties_only,
        )

        result = await self._client.send_raw(
            method="Runtime.getProperties",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetPropertiesResult.model_validate(result)

    async def global_lexical_scope_names(
        self,
        *,
        execution_context_id: ExecutionContextId | None = None,
        session_id: str | None = None,
    ) -> GlobalLexicalScopeNamesResult:
        params = GlobalLexicalScopeNamesParams(executionContextId=execution_context_id)

        result = await self._client.send_raw(
            method="Runtime.globalLexicalScopeNames",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GlobalLexicalScopeNamesResult.model_validate(result)

    async def query_objects(
        self,
        *,
        prototype_object_id: RemoteObjectId,
        object_group: str | None = None,
        session_id: str | None = None,
    ) -> QueryObjectsResult:
        params = QueryObjectsParams(
            prototypeObjectId=prototype_object_id, objectGroup=object_group
        )

        result = await self._client.send_raw(
            method="Runtime.queryObjects",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return QueryObjectsResult.model_validate(result)

    async def release_object(
        self,
        *,
        object_id: RemoteObjectId,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = ReleaseObjectParams(objectId=object_id)

        result = await self._client.send_raw(
            method="Runtime.releaseObject",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def release_object_group(
        self,
        *,
        object_group: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = ReleaseObjectGroupParams(objectGroup=object_group)

        result = await self._client.send_raw(
            method="Runtime.releaseObjectGroup",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def run_if_waiting_for_debugger(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        result = await self._client.send_raw(
            method="Runtime.runIfWaitingForDebugger",
            params=None,
            session_id=session_id,
        )
        return result

    async def run_script(
        self,
        *,
        script_id: ScriptId,
        execution_context_id: ExecutionContextId | None = None,
        object_group: str | None = None,
        silent: bool | None = None,
        include_command_line_a_p_i: bool | None = None,
        return_by_value: bool | None = None,
        generate_preview: bool | None = None,
        await_promise: bool | None = None,
        session_id: str | None = None,
    ) -> RunScriptResult:
        params = RunScriptParams(
            scriptId=script_id,
            executionContextId=execution_context_id,
            objectGroup=object_group,
            silent=silent,
            includeCommandLineAPI=include_command_line_a_p_i,
            returnByValue=return_by_value,
            generatePreview=generate_preview,
            awaitPromise=await_promise,
        )

        result = await self._client.send_raw(
            method="Runtime.runScript",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return RunScriptResult.model_validate(result)

    async def set_async_call_stack_depth(
        self,
        *,
        max_depth: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetAsyncCallStackDepthParams(maxDepth=max_depth)

        result = await self._client.send_raw(
            method="Runtime.setAsyncCallStackDepth",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_custom_object_formatter_enabled(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetCustomObjectFormatterEnabledParams(enabled=enabled)

        result = await self._client.send_raw(
            method="Runtime.setCustomObjectFormatterEnabled",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_max_call_stack_size_to_capture(
        self,
        *,
        size: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetMaxCallStackSizeToCaptureParams(size=size)

        result = await self._client.send_raw(
            method="Runtime.setMaxCallStackSizeToCapture",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def terminate_execution(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        result = await self._client.send_raw(
            method="Runtime.terminateExecution",
            params=None,
            session_id=session_id,
        )
        return result

    async def add_binding(
        self,
        *,
        name: str,
        execution_context_id: ExecutionContextId | None = None,
        execution_context_name: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = AddBindingParams(
            name=name,
            executionContextId=execution_context_id,
            executionContextName=execution_context_name,
        )

        result = await self._client.send_raw(
            method="Runtime.addBinding",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def remove_binding(
        self,
        *,
        name: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = RemoveBindingParams(name=name)

        result = await self._client.send_raw(
            method="Runtime.removeBinding",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_exception_details(
        self,
        *,
        error_object_id: RemoteObjectId,
        session_id: str | None = None,
    ) -> GetExceptionDetailsResult:
        params = GetExceptionDetailsParams(errorObjectId=error_object_id)

        result = await self._client.send_raw(
            method="Runtime.getExceptionDetails",
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetExceptionDetailsResult.model_validate(result)
